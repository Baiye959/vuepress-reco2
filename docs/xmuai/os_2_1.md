---
title: CPU 是如何执行程序的？ | 小林coding 硬件结构1
date: 2024/02/27
# categories:
# - 面经
# tags:
#  - 操作系统
---
## 图灵机的工作方式
要想知道程序执行的原理，可以从「图灵机」开始说起，图灵的基本思想是用机器来模拟人们用纸笔进行数学计算的过程，而且还定义了计算机由哪些部分组成，程序又是如何执行的。

图灵机的样子：
![](/image/2024022704.webp)

图灵机的基本组成如下：
- 有一条「纸带」，纸带由一个个连续的格子组成，每个格子可以写入字符。纸带就好比内存，而纸带格子里的字符就好比存储的数据或程序；
- 有一个「读写头」，读写头可以读取任意一个格子里的字符，也可以把字符写入到纸带的格子里；
- 读写头上有一些部件，比如存储单元、控制单元以及运算单元：1.存储单元用于存放数据；2.控制单元用于识别字符是数据还是程序，并控制程序的流程等；3.运算单元用于执行运算指令；

知道了图灵机的组成后，我们以简单数学运算的`1+2`为例，看看它是怎么执行这段代码的：
- 首先，用读写头把'1'、'2'、'+'这三个字符写到纸带的3个格子里，然后读写头先停在'1'对应的格子上；
![](/image/2024022705.webp)

- 接着，读写头读入'1'到存储设备中，这个存储设备称为图灵机的状态；
![](/image/2024022706.webp)

- 然后，读写头向右移动一个格，用同样的方式把'2'读入到图灵机的状态，于是现在图灵机的状态里存储着两个连续的数字1和2；
![](/image/2024022707.webp)

- 读写头再往右一格就会读到'+'、把'+'传输给控制单元。控制单元发现这是一个运算符指令而不是数字，所以没有存到状态里，而是通知运算单元工作。运算单元收到要加和状态里的值的命令后，就会把状态里的1和2读入并计算，再将计算的结果3存放到状态里；
![](/image/2024022708.webp)

- 最后，运算单元把结果返回给控制单元，控制单元将结果传输给读写头，读写头往右一格把'3'写入到纸带的格子里；
![](/image/2024022709.webp)

通过上面的图灵机计算`1+2`的过程，可以发现图灵机的主要功能就是读写头读取纸带中的内容，然后交给控制单元判断是数字还是运算符指令，如果是数字就存到状态里，如果是运算符指令就通知运算符单元读取状态中的数字进行计算，最后将结果返回给读写头，读写头把结果写入纸带的格子里。

事实上，图灵机这个简单的工作方式，跟我们今天的计算机是基本一致的。接下来我们再看看今天的计算机的组成以及工作方式。