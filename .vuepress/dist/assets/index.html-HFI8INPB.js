import{_ as i,r as t,o,c,a as n,b as s,d as e,e as l}from"./app-L1aimBAr.js";const d="/image/2024030302.png",r="/image/2024030401.png",p="/image/2024030402.png",u={},b=n("h2",{id:"项目介绍",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#项目介绍","aria-hidden":"true"},"#"),s(" 项目介绍")],-1),m=n("p",null,"MIT6.s081 是麻省理工学院面向本科生的操作系统课程，其课程实验是在教学用操作系统xv6上进行扩展和优化。 Xv6操作系统源代码只有一万余行，并且相对清晰和模块化，每个lab都带有自动评测功能，非常适合用于实践操作系统知识。",-1),v=n("h2",{id:"相关链接",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#相关链接","aria-hidden":"true"},"#"),s(" 相关链接")],-1),h={href:"https://pdos.csail.mit.edu/6.S081/2020/schedule.html",target:"_blank",rel:"noopener noreferrer"},g={href:"https://www.bilibili.com/video/BV19k4y1C7kA",target:"_blank",rel:"noopener noreferrer"},k={href:"https://xv6.dgs.zone/tranlate_books/book-riscv-rev1/summary.html",target:"_blank",rel:"noopener noreferrer"},f=n("li",null,'实验指导见官网顶栏的"labs"',-1),_={href:"https://xv6.dgs.zone/labs/use_git/git1.html",target:"_blank",rel:"noopener noreferrer"},x=n("h2",{id:"配置环境",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#配置环境","aria-hidden":"true"},"#"),s(" 配置环境")],-1),w={href:"https://pdos.csail.mit.edu/6.S081/2020/tools.html",target:"_blank",rel:"noopener noreferrer"},y=l(`<p>使用vmware16pro安装虚拟机，ubuntu20.04</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade

<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span> build-essential gdb-multiarch qemu-system-misc gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu
<span class="token function">sudo</span> <span class="token function">apt-get</span> remove qemu-system-misc
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> qemu-system-misc<span class="token operator">=</span><span class="token number">1</span>:4.2-3ubuntu6
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gcc-riscv64-unknown-elf

<span class="token function">git</span> clone git://g.csail.mit.edu/xv6-labs-2020
<span class="token builtin class-name">cd</span> xv6-labs-2020/
<span class="token function">git</span> checkout util
<span class="token function">make</span> qemu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>按上述流程走下来，终端最后出现下图就成功了 <img src="`+d+'" alt=""></p><p><code>Ctrl+a x</code>退出</p><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> 常用命令</h2>',5),C=l("<li>运行<code>make gemu</code></li><li>退出<code>Ctrl-a x</code>(先按Ctrl+a,再按x)</li><li>测试是否完成lab <code>make grade</code></li><li>测试是否完成lab的子任务<code>make GRADEFLAGS=&lt;lab name&gt; grade</code><ul><li>如在util lab中，想测试是否完成子任务sleep,运行<code>make GRADEFLAGS=sleep grade</code></li></ul></li>",4),S=n("li",null,[s("一个终端执行"),n("code",null,"make CPUS=1 gemu-gdb")],-1),q=n("li",null,[s("在另一个终端执行"),n("code",null,"riscv64-unknown-elf-gdb kernel/kernel")],-1),z={href:"http://t.csdnimg.cn/UnDIa",target:"_blank",rel:"noopener noreferrer"},A=l(`<h2 id="gdb调试参考文修改" tabindex="-1"><a class="header-anchor" href="#gdb调试参考文修改" aria-hidden="true">#</a> gdb调试参考文修改</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libncurses5-dev python python-dev texinfo libreadline-dev
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libgmp-dev

<span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/gnu/gdb/gdb-9.2.tar.gz
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> gdb-9.2.tar.gz
<span class="token builtin class-name">cd</span> gdb-9.2
<span class="token function">mkdir</span> build
<span class="token builtin class-name">cd</span> build
./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local --with-python<span class="token operator">=</span>/usr/bin/python <span class="token parameter variable">--target</span><span class="token operator">=</span>riscv64-unknown-elf --enable-tui<span class="token operator">=</span>yes
<span class="token function">make</span> clean
<span class="token function">make</span> -j<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>开一个终端</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> xv6-labs-2020
<span class="token function">make</span> <span class="token assign-left variable">CPUS</span><span class="token operator">=</span><span class="token number">1</span> qemu-gdb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>开另一个终端</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>riscv64-unknown-elf-gdb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此时出现提示如下，需要在文件<code>/home/xv6/.gdbinit</code>里加上<code>add-auto-load-safe-path /home/xv6/xv6-labs-2020/.gdbinit</code><img src="`+r+`" alt=""></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /home/xv6/.gdbinit
<span class="token comment"># 在文件中添加add-auto-load-safe-path /home/xv6/xv6-labs-2020/.gdbinit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>再次尝试，成功 <img src="`+p+'" alt=""></p>',9);function E(V,B){const a=t("ExternalLinkIcon");return o(),c("div",null,[b,m,v,n("ul",null,[n("li",null,[n("a",h,[s("官网"),e(a)])]),n("li",null,[s("课程视频见官网 b站也有"),n("a",g,[s("搬运"),e(a)])]),n("li",null,[n("a",k,[s("xv6参考书翻译"),e(a)])]),f,n("li",null,[n("a",_,[s("实验指导翻译"),e(a)])])]),x,n("ul",null,[n("li",null,[n("a",w,[s("编译环境 官方文档"),e(a)])])]),y,n("ul",null,[C,n("li",null,[s("gdb调试 "),n("ul",null,[S,q,n("li",null,[s("如果报错bash:riscv64-unknown-elf-gdb:command not found可参考"),n("a",z,[s("此文"),e(a)]),s("解决")])])])]),A])}const I=i(u,[["render",E],["__file","index.html.vue"]]);export{I as default};
