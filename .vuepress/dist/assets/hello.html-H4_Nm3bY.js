import{_ as l,r as t,o as r,c as o,a as e,b as s,d as n,e as i}from"./app-2FQhi2G4.js";const d={},c={href:"https://vuepress-theme-reco.recoluan.com/",target:"_blank",rel:"noopener noreferrer"},p={href:"https://juejin.cn/post/7140934570370662407",target:"_blank",rel:"noopener noreferrer"},u={href:"https://vuepress-theme-reco.recoluan.com/docs/theme/frontmatter-home.html",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.bilibili.com/video/BV17t41177cr",target:"_blank",rel:"noopener noreferrer"},b={href:"https://www.bilibili.com/video/BV1vb411m7NY",target:"_blank",rel:"noopener noreferrer"},m={href:"https://vuepress-theme-reco.recoluan.com/",target:"_blank",rel:"noopener noreferrer"},v=e("br",null,null,-1),k={href:"https://vuepress-theme-reco.recoluan.com/",target:"_blank",rel:"noopener noreferrer"},g=i('<h2 id="👾使用感受" tabindex="-1"><a class="header-anchor" href="#👾使用感受" aria-hidden="true">#</a> 👾使用感受</h2><p>优点：</p><ol><li>美观简洁、容易上手</li><li>使用markdown语法，方便迁移、备份</li><li>在本地用vscode写markdown很舒适</li><li>稳定、小巧（不像wordpress那样在网站上编写，需要的服务器资源较少）</li></ol><p>缺点：</p><ol><li>官方文档不够详细，使用人数较少，很多问题无法快速找到答案</li><li>添加图片太麻烦</li></ol><h2 id="🐞使用中发现的问题" tabindex="-1"><a class="header-anchor" href="#🐞使用中发现的问题" aria-hidden="true">#</a> 🐞使用中发现的问题</h2><ol><li>热更新问题：如果涉及文件的增加删除（目录上发生改变），要重新执行<code>yarn dev</code>才能更新</li><li>有时候文章目录不显示...当然这个问题在发布的静态中不会出现，只是本地<code>yarn dev</code>的时候不太舒服</li></ol><h2 id="🤖待完善" tabindex="-1"><a class="header-anchor" href="#🤖待完善" aria-hidden="true">#</a> 🤖待完善</h2><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 云服务器上的构建尝试</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> webhook推送触发自动构建</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 备案</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> ssl证书配置</li></ul><h2 id="webhooks推送触发自动构建" tabindex="-1"><a class="header-anchor" href="#webhooks推送触发自动构建" aria-hidden="true">#</a> webhooks推送触发自动构建</h2>',10),f={href:"https://github.com/Baiye959/webhooks",target:"_blank",rel:"noopener noreferrer"},x=i(`<p>使用Docker方式部署。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/Baiye959/webhooks.git
<span class="token builtin class-name">cd</span> webhooks
<span class="token function">docker</span> build <span class="token parameter variable">-t</span> webhooks-app <span class="token builtin class-name">.</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">9090</span>:8080 webhooks-app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在Github仓库中添加Webhooks，Payload URL填写&quot;IP:9090/webhooks&quot;，Content type: &quot;application/json&quot;，Secret为空（暂未处理），其他选项按需选择。</p><h2 id="应急方案" tabindex="-1"><a class="header-anchor" href="#应急方案" aria-hidden="true">#</a> 应急方案</h2><p>本站部署暂未完成，应急方案如下：<br></p><ol><li>在本地（windows）进行构建，推送到github仓库</li><li>云服务器（ubuntu20.04）上apache2+crontab定时执行git pull脚本</li></ol><h3 id="本地-windows" tabindex="-1"><a class="header-anchor" href="#本地-windows" aria-hidden="true">#</a> 本地（windows）</h3><p>本地的提交脚本如下，用<code>bash push.sh</code>执行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># yarn build</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;change&quot;</span>
<span class="token function">git</span> push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里不知道为什么用脚本执行<code>yarn build</code>的时候会报错&quot;Yarn requires Node.js 4.0 or higher to be installed.&quot;，直接在终端执行可以成功。<br> 执行<code>yarn build</code>报错&quot;Error: EBUSY: resource busy or locked, unlink &#39;C:\\CodeSpace\\vuepress-reco2.vuepress\\dist\\assets\\app-zpDucuRP.js&#39;&quot;，可以执行<code>yarn cache clean</code>解决。</p><h3 id="云服务器" tabindex="-1"><a class="header-anchor" href="#云服务器" aria-hidden="true">#</a> 云服务器</h3><p>deploy.sh内容如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">cd</span> /root/vuepress-reco2
<span class="token function">git</span> pull
<span class="token function">cp</span> <span class="token parameter variable">-rf</span> .vuepress/dist/ ~
<span class="token function">rm</span> <span class="token parameter variable">-r</span> /root/html
<span class="token function">mv</span> /root/dist /root/html
<span class="token function">cp</span> <span class="token parameter variable">-rf</span> /root/html /var/www
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编辑crontab要执行的命令:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/crontab
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加以下字段：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>*/10  *   * * *   root   bash /root/vuepress-reco2/deploy.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>意思是每十分钟执行一次脚本deploy.sh，以下是官方样例：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Example of job definition:
# .---------------- minute (0 - 59)
# |  .------------- hour (0 - 23)
# |  |  .---------- day of month (1 - 31)
# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
# |  |  |  |  |
# *  *  *  *  * user-name command to be executed
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存退出后重新载入cron配置：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>service cron reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>开启crontab日记：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo vim /etc/rsyslog.d/50-default.conf 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>将cron相关行的注释取消，保存退出，重启rsyslog：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo service rsyslog restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,25);function _(w,y){const a=t("ExternalLinkIcon");return r(),o("div",null,[e("p",null,[s("本站使用"),e("a",c,[s("vuepress-theme-reco2.x"),n(a)]),s("主题，参考链接如下：")]),e("ol",null,[e("li",null,[e("a",p,[s("个人博客搭建遇坑流程のVuePress2 📕"),n(a)])]),e("li",null,[e("a",u,[s("主题官网文档"),n(a)])]),e("li",null,[e("a",h,[s("1小时快速搭建vuepress个人博客【2022重录带源码】"),n(a)])]),e("li",null,[e("a",b,[s("【啰里啰嗦】一步步搭建 VuePress 及优化"),n(a)])])]),e("p",null,[s("建议先看链接4的P1把本地环境搭建好，再跟着链接1和链接2搭建"),e("a",m,[s("vuepress-theme-reco2.x"),n(a)]),s("博客，最后跟着链接3把博客部署到云服务器上。 "),v,s(" 这里发现链接3的部署是在CentOS服务器上，而CentOS7不支持"),e("a",k,[s("vuepress-theme-reco2.x"),n(a)]),s("所需的node16，先使用下文的应急方案。")]),g,e("p",null,[e("a",f,[s("项目Github链接"),n(a)]),s("：该SpringBoot应用程序能够接收GitHub Webhooks的POST请求，并在接收到请求后执行一个特定的shell脚本。")]),x])}const B=l(d,[["render",_],["__file","hello.html.vue"]]);export{B as default};
