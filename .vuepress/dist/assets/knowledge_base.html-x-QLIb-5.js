import{_ as t,r as l,o as c,c as o,a as n,b as a,d as e,e as i}from"./app-pD98G-2W.js";const r={},d={class:"custom-container info"},p=n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])],-1),u=n("p",{class:"custom-container-title"},"INFO",-1),h=n("br",null,null,-1),v={href:"https://mp.weixin.qq.com/s/eVoNEfugHH5AkQTqo-BsFg",target:"_blank",rel:"noopener noreferrer"},m=n("br",null,null,-1),b={href:"https://www.bilibili.com/video/BV1bh4y1U7Jf",target:"_blank",rel:"noopener noreferrer"},g=n("h3",{id:"前期准备",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前期准备","aria-hidden":"true"},"#"),a(" 前期准备")],-1),k={href:"http://t.csdnimg.cn/pbDE5",target:"_blank",rel:"noopener noreferrer"},_={href:"https://learn.microsoft.com/zh-cn/windows/wsl/install",target:"_blank",rel:"noopener noreferrer"},f={href:"https://baiye959.cn/blogs/other/git.html",target:"_blank",rel:"noopener noreferrer"},w={href:"https://zhuanlan.zhihu.com/p/459607806",target:"_blank",rel:"noopener noreferrer"},x=i(`<h3 id="开始构建" tabindex="-1"><a class="header-anchor" href="#开始构建" aria-hidden="true">#</a> 开始构建</h3><p>模型下载</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://huggingface.co/THUDM/chatglm2-6b-32k
<span class="token function">git</span> clone https://huggingface.co/moka-ai/m3e-base
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>下载源码</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># git clone https://github.com/chatchat-space/Langchain-Chatchat.git</span>

<span class="token function">wget</span> https://github.com/chatchat-space/Langchain-Chatchat/archive/refs/tags/v0.2.2.tar.gz
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> v0.2.2.tar.gz
<span class="token function">mv</span> Langchain-Chatchat-0.2.2/ Langchain-Chatchat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda create <span class="token parameter variable">-n</span> langchain-chatchat <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.10</span>
python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> <span class="token parameter variable">--upgrade</span> pip
pip <span class="token function">install</span> torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
conda activate langchain-chatchat
conda <span class="token function">install</span> spacy
<span class="token builtin class-name">cd</span> Langchain-Chatchat
pip <span class="token function">install</span> cchardet
pip <span class="token function">install</span> accelerate
pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt <span class="token comment"># 这里有几个依赖很大，网速慢会超时爆红</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),y=n("div",{class:"custom-container warning"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8v4"}),n("path",{d:"M12 16h.01"})])]),n("p",{class:"custom-container-title"},"WARNING"),n("p",null,"现在做到这里了，当前目录没有下述文件，去看视频"),n("p",null,[a("文件内容跟视频里不一样，应该是爬取的代码版本不一样"),n("br"),a(" 视频是2023年8月发布的，可能是版本v0.2.2 "),n("img",{src:"https://github.com/chatchat-space/Langchain-Chatchat/releases/tag/v0.2.2",alt:"版本v02.2链接"})])],-1),q=i(`<p>生成并修改配置文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> configs/
<span class="token function">cp</span> model_config.py.example model_config.py
<span class="token function">cp</span> server_config.py.example server_config.py

<span class="token function">vim</span> model_config.py
修改model_config.py内与模型相关的相关参数
<span class="token string">&quot;m3e-base&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;D:/models/m3e-base&quot;</span>,
<span class="token string">&quot;local_model_path&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;D:/models/chatglm2-6b-32k&quot;</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置数据库</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>下载数据库并安装
https://www.enterprisedb.com/downloads/postgres-postgresql-downloads
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置向量插件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>call <span class="token string">&quot;C:\\Program Files\\Microsoft Visual Studio<span class="token entity" title="\\202">\\202</span>2\\Community\\VC\\Auxiliary\\Build<span class="token entity" title="\\v">\\v</span>cvars64.bat&quot;</span>
<span class="token builtin class-name">set</span> <span class="token string">&quot;PGROOT=C:\\Program Files\\PostgreSQL<span class="token entity" title="\\15">\\15</span>&quot;</span>
<span class="token function">git</span> clone <span class="token parameter variable">--branch</span> v0.4.4 https://github.com/pgvector/pgvector.git
<span class="token builtin class-name">cd</span> pgvector
nmake /F Makefile.win
nmake /F Makefile.win <span class="token function">install</span>
CREATE DATABASE TEST<span class="token punctuation">;</span>
CREATE EXTENSION IF NOT EXISTS vector<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>数据库准备工作</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python <span class="token parameter variable">-m</span> spacy download en_core_web_sm
python <span class="token parameter variable">-m</span> spacy download zh_core_web_sm
pip <span class="token function">install</span> psycopg2
pip <span class="token function">install</span> pgvector
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>向量库初始化</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python init_database.py
python init_database.py --recreate-vs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>启动运行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python startup.py --all-webui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,12);function C(E,L){const s=l("ExternalLinkIcon");return c(),o("div",null,[n("div",d,[p,u,n("p",null,[a("以 Langchain-Chatchat + PGvector + ChatGLM2-6B-32K为例，从零开始构建一个基于本地开源大模型的私有知识库系统。"),h,n("a",v,[a("参考文档"),e(s)]),m,n("a",b,[a("参考视频"),e(s)])])]),g,n("ol",null,[n("li",null,[n("a",k,[a("利用VMware创建Ubuntu虚拟机"),e(s)])]),n("li",null,[n("a",_,[a("如何使用 WSL 在 Windows 上安装 Linux"),e(s)])]),n("li",null,[n("a",f,[a("Git合集"),e(s)])]),n("li",null,[n("a",w,[a("Ubuntu 安装 conda"),e(s)])])]),x,y,q])}const N=t(r,[["render",C],["__file","knowledge_base.html.vue"]]);export{N as default};
